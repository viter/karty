<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Карти::another page 1</title>

    <!-- Bootstrap -->
    <link href="/public/css/bootstrap.min.css" rel="stylesheet">
    <script src="/socket.io/socket.io.js"></script>
    <script>
      var socket = io.connect('http://localhost:8080');
      socket.on('news', function (data) {
        console.log(data);
        socket.emit('my other event', { my: 'data' });
      });
    </script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="container">
      <div class="header clearfix">
        <nav>
          <ul class="nav nav-pills pull-right">
            <li role="presentation" class="active"><a href="#">Home</a></li>
            <li role="presentation"><a href="#">About</a></li>
            <li role="presentation"><a href="#">Contact</a></li>
          </ul>
        </nav>
        <h3 class="text-muted">Project name</h3>
      </div>

      <div class="jumbotron">
        <svg id="playground" width="100%" height="500"></svg>
      </div>

      <footer class="footer">
        <p>&copy; 2016 Company, Inc.</p>
      </footer>

    </div> <!-- /container -->

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="/public/js/jquery-3.1.0.min.js"></script>
    <script src="/public/js/snap.svg-min.js"></script>
    
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="/public/js/bootstrap.min.js"></script>
    <script type="text/javascript">

      var s = Snap("#playground"); 
      var g = s.g();

      var cards = [
        {name: "sixOfClubs", url: "/public/img/6_of_clubs.svg"},
        {name: "sixOfDiamonds", url: "/public/img/6_of_diamonds.svg"},
        {name: "sixOfHearts", url: "/public/img/6_of_hearts.svg"},
        {name: "sixOfSpades", url: "/public/img/6_of_spades.svg"},
        {name: "sevenOfClubs", url: "/public/img/7_of_clubs.svg"},
        {name: "sevenOfDiamonds", url: "/public/img/7_of_diamonds.svg"},
        {name: "sevenOfHearts", url: "/public/img/7_of_hearts.svg"},
        {name: "sevenOfSpades", url: "/public/img/7_of_spades.svg"},
        {name: "eightOfClubs", url: "/public/img/8_of_clubs.svg"},
        {name: "eightOfDiamonds", url: "/public/img/8_of_diamonds.svg"},
        {name: "eightOfHearts", url: "/public/img/8_of_hearts.svg"},
        {name: "eightOfSpades", url: "/public/img/8_of_spades.svg"},
        {name: "nineOfClubs", url: "/public/img/9_of_clubs.svg"},
        {name: "nineOfDiamonds", url: "/public/img/9_of_diamonds.svg"},
        {name: "nineOfHearts", url: "/public/img/9_of_hearts.svg"},
        {name: "nineOfSpades", url: "/public/img/9_of_spades.svg"},
        {name: "tenOfClubs", url: "/public/img/10_of_clubs.svg"},
        {name: "tenOfDiamonds", url: "/public/img/10_of_diamonds.svg"},
        {name: "tenOfHearts", url: "/public/img/10_of_hearts.svg"},
        {name: "tenOfSpades", url: "/public/img/10_of_spades.svg"},
        {name: "jackOfClubs", url: "/public/img/jack_of_clubs2.svg"},
        {name: "jackOfDiamonds", url: "/public/img/jack_of_diamonds2.svg"},
        {name: "jackOfHearts", url: "/public/img/jack_of_hearts2.svg"},
        {name: "jackOfSpades", url: "/public/img/jack_of_spades2.svg"},
        {name: "queenOfClubs", url: "/public/img/queen_of_clubs2.svg"},
        {name: "queenOfDiamonds", url: "/public/img/queen_of_diamonds2.svg"},
        {name: "queenOfHearts", url: "/public/img/queen_of_hearts2.svg"},
        {name: "queenOfSpades", url: "/public/img/queen_of_spades2.svg"},
        {name: "kingOfClubs", url: "/public/img/king_of_clubs2.svg"},
        {name: "kingOfDiamonds", url: "/public/img/king_of_diamonds2.svg"},
        {name: "kingOfHearts", url: "/public/img/king_of_hearts2.svg"},
        {name: "kingOfSpades", url: "/public/img/king_of_spades2.svg"},
        {name: "aceOfClubs", url: "/public/img/ace_of_clubs.svg"},
        {name: "aceOfDiamonds", url: "/public/img/ace_of_diamonds.svg"},
        {name: "aceOfHearts", url: "/public/img/ace_of_hearts.svg"},
        {name: "aceOfSpades", url: "/public/img/ace_of_spades.svg"},
      ];
      var shuffleCards = shuffle(cards);
      var playerCards = [];
      var positionX = 0;
      for(var i = 0; i < 6; i++) {
        playerCards[i] = g.image(shuffleCards[i].url, positionX, 300, 120, 190 ).attr({id:'c'+i,class:'cardimage'});
        positionX += 70; 
      }

      for(var j=0; j < 6; j++) {
         console.log(playerCards[j]);
        playerCards[j].hover(
          function() {
           
            return hoverover(playerCards[j]);
                }, 
          function() { 
                  //hoverout(g.select('#'+g.select(".cardimage").attr('id')));
                  return hoverout(playerCards[j]);
                }
        );
      }
      var id = '';
      playerCards[0].hover(
          function() {
            console.log(playerCards[0]);
                  //hoverover(g.select('#'+g.select(".cardimage").attr('id')));
                  hoverover(playerCards[0]);
                }, 
          function() { 
                  //hoverout(g.select('#'+g.select(".cardimage").attr('id')));
                  hoverout(playerCards[0]);
                }
        );
      playerCards[1].hover(
          function() {
            console.log(playerCards[1]);
                  //hoverover(g.select('#'+g.select(".cardimage").attr('id')));
                  hoverover(playerCards[1]);
                }, 
          function() { 
                  //hoverout(g.select('#'+g.select(".cardimage").attr('id')));
                  hoverout(playerCards[1]);
                }
        );

      var hoverover = function(el) { el.animate({ transform: 's2r45,150,150' }, 1000, mina.bounce ) };
      var hoverout = function(el) { el.animate({ transform: 's1r0,150,150' }, 1000, mina.bounce ) };

      //var image = g.image(cards[0].url, 200, 0, 170, 250 );
      //image.animate({ transform: 's2r45,150,150' }, 5000, mina.bounce );
        //image.animate({ transform: 's1r0,150,150' }, 5000, mina.bounce );
      

      /*Snap.load("/public/img/king_of_diamonds2.svg", function (card) {
    // Note that we traverse and change attr before SVG is even added to the page (improving performance)
          //phone.selectAll("path[fill='#ff0000']").attr({fill: "#00ff00"});
          console.info(card);
          card.selectAll().attr({width: 170});
          s.append(card);    //Now we add the SVG element to the page
      });*/

      function shuffle(array) {
        var currentIndex = array.length, temporaryValue, randomIndex ;

        // While there remain elements to shuffle...
        while (0 !== currentIndex) {

          // Pick a remaining element...
          randomIndex = Math.floor(Math.random() * currentIndex);
          currentIndex -= 1;

          // And swap it with the current element.
          temporaryValue = array[currentIndex];
          array[currentIndex] = array[randomIndex];
          array[randomIndex] = temporaryValue;
        }

        return array;
      }
    </script>
  </body>
</html>
